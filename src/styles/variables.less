// ============================================
// LESS Variables & Mixins
// Centralized style definitions for the app
// ============================================

// ============================================
// Colors - Linked to CSS Custom Properties
// ============================================
@primary-color: var(--primary-color);
@primary-color-light: var(--primary-color-light);
@primary-color-lighter: var(--primary-color-lighter);
@error-color: #ff4d4f;

// Alpha variants
@primary-alpha-10: var(--primary-alpha-10);
@primary-alpha-20: var(--primary-alpha-20);
@primary-alpha-30: var(--primary-alpha-30);
@primary-alpha-50: var(--primary-alpha-50);

// ============================================
// Timing & Easing
// ============================================
@transition-fast: 150ms;
@transition-normal: 200ms;
@transition-slow: 300ms;
@ease-out: cubic-bezier(0.25, 0.46, 0.45, 0.94);

// ============================================
// Dimensions
// ============================================
@player-bar-height: 68px;
@safe-area-bottom: env(safe-area-inset-bottom, 0px);

// Border radius - Aligned with Ant Design
@radius-sm: 8px;
@radius-md: 12px;
@radius-lg: 16px;
@radius-xl: 24px;
@radius-full: 9999px;

// Button sizes
@btn-size-sm: 40px;
@btn-size-md: 48px;
@btn-size-lg: 56px;
@btn-size-xl: 72px;

// ============================================
// Mixins
// ============================================

// Glass-morphism effect - Performance optimized
.glass-effect(@blur: 16px, @bg: var(--primary-alpha-10)) {
  background: @bg;

  // Apply blur only on desktop/capable hardware
  @media (hover: hover) and (pointer: fine) {
    backdrop-filter: blur(@blur) saturate(180%);
    -webkit-backdrop-filter: blur(@blur) saturate(180%);
  }

  @media (hover: none) {
    background: var(--bg-card);
    opacity: 0.98;
  }
}

// Custom Scrollbar - Minimal and consistent
.custom-scrollbar(@width: 4px) {
  &::-webkit-scrollbar {
    width: @width;
    height: @width;
  }

  &::-webkit-scrollbar-track {
    background: transparent;
  }

  &::-webkit-scrollbar-thumb {
    background: var(--border-color);
    border-radius: @radius-full;
    background-clip: padding-box;
    border: 1px solid transparent;

    &:hover {
      background: var(--text-secondary);
    }
  }
}

// Control button base style - Simplified physical hitbox
.control-btn-base(@size, @font-size, @radius: @radius-md) {
  width: @size;
  height: @size;
  min-width: @size;
  padding: 0 !important;
  display: flex !important;
  align-items: center;
  justify-content: center;
  border-radius: @radius;
  cursor: pointer;
  border: 1px solid var(--primary-alpha-20);
  background: var(--primary-alpha-10);
  transition: all @transition-fast @ease-out;
  user-select: none;
  touch-action: manipulation;

  // Sync antd-mobile CSS variables
  --background-color: var(--primary-alpha-10);
  --border-color: var(--primary-alpha-20);
  --border-radius: @radius;
  --text-color: var(--text-primary);

  &:hover {
    @media (hover: hover) {
      background: var(--primary-alpha-20);
      transform: translateY(-1px);
      --background-color: var(--primary-alpha-20);
    }
  }

  &:active {
    transform: scale(0.96);
    background: var(--primary-alpha-30);
    --background-color: var(--primary-alpha-30);
  }
}

// Card hover effect
.card-hover-effect(@lift: -2px) {
  transition: all @transition-fast @ease-out;
  will-change: transform, box-shadow;

  @media (hover: hover) {
    &:hover {
      border-color: var(--primary-color);
      transform: translateY(@lift);
      box-shadow: 0 4px 12px var(--shadow-color);
    }
  }

  &:active {
    transform: scale(0.98);
  }
}

// Text shadow for readability on covers
.text-shadow() {
  text-shadow: 0 2px 4px rgba(0, 0, 0, 0.3);
}

// Responsive breakpoint
.mobile-small(@rules) {
  @media (max-width: 375px) {
    @rules();
  }
}